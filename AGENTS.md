```markdown
# Инструкции для ИИ-агентов по работе с проектом "Alien Invasion"

Этот документ содержит рекомендации и инструкции для ИИ-агентов, которые могут работать с кодовой базой данного проекта.

## 1. Стиль кода и Качество

*   **PEP 8 и Black:** Проект придерживается стандарта PEP 8. Для автоматического форматирования кода используется `black` с настройками по умолчанию (длина строки 88 символов). Перед коммитом изменений убедитесь, что код отформатирован с помощью `black .`.
*   **Магические числа:** Избегайте использования "магических чисел". Числовые константы, особенно те, что влияют на игровую логику, баланс или отображение, должны быть вынесены в `alien_invasion/settings.py` как атрибуты класса `Settings` или определены как именованные константы на уровне модуля (с префиксом `_`), если они специфичны для одного файла и не являются глобальными настройками.
*   **Комментарии и Документация:** Пишите понятные комментарии и документирующие строки (docstrings) для классов, методов и функций, особенно если логика не очевидна. Предпочтительный язык для комментариев - русский или английский, но будьте последовательны в рамках одного модуля/файла.

## 2. Управление Ассетами

*   **Расположение:** Все игровые ассеты (изображения, звуки, музыка, шрифты) должны находиться в директории `assets/` в соответствующих поддиректориях (`gfx`, `audio`, `fonts`).
*   **Валидация:** При добавлении или изменении ассетов, убедитесь, что они корректно обрабатываются игрой. Используйте скрипт `tools/validate_assets.py` для проверки наличия и базовой валидности ассетов.
    *   Если вы добавляете новые типы ассетов или изменяете ожидаемые пути, обновите список `EXPECTED_ASSETS` в `tools/validate_assets.py`.
*   **Fallback-механизмы:** Игра стремится иметь fallback-механизмы для отсутствующих ассетов. Если вы добавляете новый тип ресурса, рассмотрите возможность реализации загрузки ресурса-заглушки.

## 3. Использование Настроек

*   **Централизованные настройки:** Большинство игровых параметров (скорости, размеры, цвета, пути к ресурсам, текстовые строки UI) управляются через класс `Settings` в `alien_invasion/settings.py`. При внесении изменений, связанных с этими параметрами, модифицируйте `Settings.py`.
*   **Динамические настройки:** Параметры, зависящие от уровня игры, рассчитываются динамически в методах `calculate_*` и инициализируются через `initialize_dynamic_settings()` в классе `Settings`. При изменении логики прогрессии сложности, обращайте внимание на эти методы.

## 4. Тестирование

*   **Запуск тестов:** Для запуска тестов используйте стандартные команды `unittest` из корневой директории проекта:
    ```bash
    python -m unittest discover -s tests
    ```
    Или, если используется специфический скрипт-раннер (проверьте `tests/run_tests_instruction_ru.txt`):
    ```bash
    # python tests/run_tests.py (пример, если такой файл существует)
    ```
*   **Написание тестов:** При добавлении новой функциональности или исправлении ошибок, сопровождайте изменения соответствующими юнит-тестами. Обращайте внимание на мокирование зависимостей (особенно Pygame) для изоляции тестов.
*   **Полнота моков:** При тестировании кода, взаимодействующего с Pygame, убедитесь, что моки Pygame достаточно полны для корректной работы тестов.

## 5. Игровая Логика

*   **Состояния игры:** Основная игровая логика управляется через состояния (`STATE_MENU`, `STATE_PLAYING`, `STATE_PAUSED`, `STATE_GAME_OVER`) в классе `AlienInvasion` (`alien_invasion/alien_invasion.py`).
*   **Обработка событий:** Цикл обработки событий находится в `AlienInvasion._check_events()`.
*   **Обновление объектов:** Игровые объекты (корабль, пришельцы, пули, бонусы) обновляются в соответствующих методах `update()` и отрисовываются в `_update_screen()`.

## 6. Вспомогательные Инструменты

*   Директория `tools/` содержит вспомогательные скрипты. Ознакомьтесь с их назначением, если ваша задача связана с ассетами или их проверкой.

## 7. Коммиты и Ветвление

*   **Сообщения коммитов:** Пишите осмысленные сообщения коммитов, описывающие суть изменений.
*   **Ветвление:** Для каждой новой задачи или фичи создавайте отдельную ветку.

Следуя этим рекомендациям, вы поможете поддерживать кодовую базу в хорошем состоянии и облегчите дальнейшую разработку.
```
