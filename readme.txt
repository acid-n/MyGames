## Об игре "Alien Invasion"

"Alien Invasion" — это классический 2D аркадный шутер, разработанный с использованием библиотеки Pygame. Игрок управляет космическим кораблем, расположенным в нижней части экрана, с основной целью отразить волны наступающих пришельцев и уничтожить их как можно больше.

**Ключевые механики игры:**

*   **Управление кораблем:**
    *   Игрок может перемещать свой корабль горизонтально (влево и вправо), уворачиваясь от вражеских атак и занимая выгодные позиции для стрельбы.
    *   Нажатие клавиши **ESC** во время игрового процесса или в меню паузы теперь всегда возвращает игрока в главное меню. Выход из игры по ESC возможен из главного меню или экрана "Конец игры".

*   **Стрельба:** Корабль игрока способен выпускать снаряды для уничтожения пришельцев. Количество одновременно выпущенных снарядов ограничено. При активации бонуса "Двойной выстрел" корабль выпускает по два снаряда одновременно.

*   **Флот пришельцев:** Пришельцы появляются в верхней части экрана и движутся организованным флотом. Достигнув края экрана, флот меняет направление и немного смещается вниз, приближаясь к кораблю игрока.

*   **Система подсчета очков:** За каждого сбитого пришельца начисляются очки. Ведется учет текущего счета и рекорда (high score).

*   **Уровни и прогрессия сложности:**
    *   Сложность игры плавно нарастает с каждым новым уровнем и зависит от номера текущего уровня (а не от набранных очков).
    *   **Параметры сложности:** Скорость движения пришельцев, скорость снижения флота при достижении края экрана, а также факторы, влияющие на количество пришельцев в ряду и количество рядов, динамически рассчитываются для каждого уровня.
    *   **Механика роста:** Каждый из этих параметров имеет базовое значение для уровня 1 и увеличивается с каждым последующим уровнем по формуле `базовое_значение + (номер_уровня - 1) * шаг_прироста`.
    *   **Ограничения (Caps):** Для каждого параметра сложности установлено максимальное значение, чтобы предотвратить чрезмерное усложнение и сохранить играбельность на высоких уровнях.
    *   **Стоимость пришельцев:** Количество очков за уничтожение пришельца также увеличивается с уровнем по аналогичной формуле с максимальным ограничением.

*   **Бонусы (Power-ups):** В игру добавлены бонусы для помощи игроку.
    *   **Типы бонусов:** "Щит" (временная неуязвимость) и "Двойной выстрел".
    *   **Правила появления:**
        *   *Уровень 1:* Бонусы отсутствуют.
        *   *Уровень 2:* Может появиться только бонус "Щит" (шанс ~15%).
        *   *Уровень 3 и выше:* Доступны бонусы "Щит" (шанс ~15%) и "Двойной выстрел" (шанс ~12%).
        *   *Перезарядка (кулдауны):* Оба бонуса имеют независимые таймеры перезарядки, установленные на 15 секунд. Время перезарядки может уменьшаться с повышением уровня, но не будет ниже 15 секунд.
        *   *Гарантированное появление:* Реализован механизм, гарантирующий появление хотя бы одного доступного бонуса (если он не на перезарядке и доступен для текущего уровня) после уничтожения 75% пришельцев в текущей волне, если до этого момента бонусы не появлялись.
    *   **Скорость падения:** Скорость падения бонусов динамически рассчитывается: базовая скорость составляет ~55% от начальной скорости пришельцев на текущем уровне, незначительно увеличивается с каждым уровнем (на 0.5% за уровень после первого) и имеет максимальный предел (80% от начальной скорости пришельцев), чтобы бонусы оставались ловимыми.

*   **Жизни игрока и окончание игры:** Игроку дается ограниченное количество жизней (кораблей). При столкновении с пришельцем (если не активен "Щит") или если пришелец достигает нижней границы экрана, игрок теряет одну жизнь. Потеря всех жизней приводит к окончанию игры (Game Over), после чего можно начать игру заново из главного меню.

Игра предоставляет динамичный и увлекательный игровой процесс, требующий от игрока реакции и тактического мышления для защиты Земли от инопланетного вторжения.

## Ключевые возможности и недавние доработки (Историческая справка)

Этот раздел описывает основные ранее реализованные игровые механики и улучшения, внесенные в проект "Alien Invasion". *Информация о текущих механиках сложности и бонусов представлена выше, в разделе "Ключевые механики игры".*

*   **Система состояний игры (Game State Machine):**
    Внедрена система состояний игры (Game State Machine), четко разделяющая логику главного меню (`STATE_MENU`), активного игрового процесса (`STATE_PLAYING`), паузы (`STATE_PAUSED`) и экрана окончания игры (`STATE_GAME_OVER`). Это улучшает структуру кода и позволяет более гибко управлять различными этапами игры.

*   **Главное меню:**
    Игра теперь запускается с главного меню, где игроку предлагается начать "Новую игру" или "Выход" из приложения. Меню также отображается после завершения игровой сессии. Кнопки в меню динамически подстраивают свой размер под текст.

*   **Функция Паузы:**
    Добавлена возможность поставить игру на паузу в любой момент активного игрового процесса нажатием клавиши 'P'. Повторное нажатие возобновляет игру. В режиме паузы на экране отображается сообщение "Пауза" и меню с опциями "Продолжить", "Заново", "Главное меню".

*   **Сохранение рекорда:**
    Рекорд (high score) теперь сохраняется между игровыми сессиями. Данные о рекорде хранятся в файле `highscore.json`.

*   **Визуализация лазеров игрока:** Цвет снарядов игрока изменен на ярко-красный для лучшей видимости.

*   **Исправление путей к ресурсам:**
    Устранена ошибка `FileNotFoundError`, которая могла возникать при запуске игры из директории, отличной от корневой. Пути к графическим ресурсам теперь формируются как абсолютные, что обеспечивает более стабильный запуск игры.

## Проведенный рефакторинг кода (Историческая справка)

Ранее в рамках улучшения кодовой базы проекта "Alien Invasion" был проведен комплексный рефакторинг. Основными целями этих изменений были повышение модульности, улучшение читаемости кода, упрощение его дальнейшей поддержки и расширения, а также повышение общей надежности и конфигурируемости игры.

**Основные направления рефакторинга:**

1.  **Структурные улучшения в основном игровом файле (`alien_invasion.py`).**
2.  **Централизация настроек и параметров (`settings.py`).**
3.  **Улучшения в классах игровых объектов.**
4.  **Коррекция комментариев и документации.**

Эти изменения способствовали созданию более чистого, гибкого и устойчивого кода, что облегчает его понимание и дальнейшее развитие проекта.

## Как запустить игру на локальном компьютере

Следуйте этим инструкциям, чтобы загрузить, установить зависимости и запустить игру "Alien Invasion" на вашем компьютере.

### 1. Клонирование репозитория

Сначала необходимо клонировать репозиторий с игрой на ваш локальный компьютер. Откройте терминал или командную строку и выполните следующую команду:

```bash
git clone YOUR_REPOSITORY_URL
```
**Примечание:** Замените `YOUR_REPOSITORY_URL` на актуальный URL-адрес репозитория.

После выполнения команды перейдите в созданную директорию:
```bash
cd имя_папки_репозитория
```

### 2. Установка зависимостей

Для работы игры необходим Python 3 и библиотека Pygame.

*   **Убедитесь, что у вас установлен Python 3.** Вы можете скачать его с официального сайта [python.org](https://www.python.org/).

*   **Установите Pygame:**
    В корневой директории проекта находится файл `requirements.txt`, который содержит список необходимых библиотек (в данном случае, только Pygame). Для установки выполните команду:

    ```bash
    pip install -r requirements.txt
    ```
    **Примечание:** Если у вас несколько версий Python, или `pip` не указывает на установку для Python 3, вам может потребоваться использовать `pip3 install -r requirements.txt` или `python3 -m pip install -r requirements.txt`.

### 3. Запуск игры

После установки зависимостей вы готовы к запуску игры. Убедитесь, что вы находитесь в корневой директории проекта (той, где лежит файл `alien_invasion.py`).

Для запуска игры выполните следующую команду в терминале:

```bash
python alien_invasion.py
```
**Примечание:** На некоторых системах, особенно если у вас установлено несколько версий Python, может потребоваться явно указать `python3`:
```bash
python3 alien_invasion.py
```

После этого должно открыться окно с игрой "Alien Invasion". Приятной игры!
